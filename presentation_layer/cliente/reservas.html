<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Mis Reservas</title>
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/jquery.dataTables.min.css" />
  </head>
  <body>
    <div class="container mt-5">
      <h2>Mis Reservas</h2>
      <table id="tabla-reservas" class="display">
        <thead>
          <tr>
            <th>ID</th>
            <th>Habitaci√≥n</th>
            <th>Fecha Inicio</th>
            <th>Fecha Fin</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/js/jquery.dataTables.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script>
      // cliente/reservas.html
      $(document).ready(function () {
        var token = localStorage.getItem("token");
        if (!token) {
          window.location.href = "../login.html";
        }

        $.ajax({
          url: "/api/reservas/cliente",
          method: "GET",
          headers: {
            Authorization: "Bearer " + token,
          },
          success: function (data) {
            // Renderizar las reservas en la tabla
            $.each(data, function (index, reserva) {
              var row = `
                    <tr>
                        <td>${reserva.id}</td>
                        <td>${reserva.habitacion_numero}</td>
                        <td>${reserva.fecha_inicio}</td>
                        <td>${reserva.fecha_fin}</td>
                        <td>${reserva.estado}</td>
                    </tr>
                `;
              $("#tabla-reservas tbody").append(row);
            });
            $("#tabla-reservas").DataTable();
          },
          error: function (error) {
            alert("Error al cargar las reservas");
          },
        });
      });
    </script>
  </body>
</html>
